{"ast":null,"code":"import { __spreadArrays } from \"tslib\";\nimport { r as raf } from './helpers-46f4a262.js';\n\nvar setStyleProperty = function (element, propertyName, value) {\n  element.style.setProperty(propertyName, value);\n};\n\nvar removeStyleProperty = function (element, propertyName) {\n  element.style.removeProperty(propertyName);\n};\n\nvar animationEnd = function (el, callback) {\n  var unRegTrans;\n  var opts = {\n    passive: true\n  };\n\n  var unregister = function () {\n    if (unRegTrans) {\n      unRegTrans();\n    }\n  };\n\n  var onTransitionEnd = function (ev) {\n    if (el === ev.target) {\n      unregister();\n      callback(ev);\n    }\n  };\n\n  if (el) {\n    el.addEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n    el.addEventListener('animationend', onTransitionEnd, opts);\n\n    unRegTrans = function () {\n      el.removeEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n      el.removeEventListener('animationend', onTransitionEnd, opts);\n    };\n  }\n\n  return unregister;\n};\n\nvar generateKeyframeRules = function (keyframes) {\n  if (keyframes === void 0) {\n    keyframes = [];\n  }\n\n  return keyframes.map(function (keyframe) {\n    var offset = keyframe.offset;\n    var frameString = [];\n\n    for (var property in keyframe) {\n      if (keyframe.hasOwnProperty(property) && property !== 'offset') {\n        frameString.push(property + \": \" + keyframe[property] + \";\");\n      }\n    }\n\n    return offset * 100 + \"% { \" + frameString.join(' ') + \" }\";\n  }).join(' ');\n};\n\nvar keyframeIds = [];\n\nvar generateKeyframeName = function (keyframeRules) {\n  var index = keyframeIds.indexOf(keyframeRules);\n\n  if (index < 0) {\n    index = keyframeIds.push(keyframeRules) - 1;\n  }\n\n  return \"ion-animation-\" + index;\n};\n\nvar getStyleContainer = function (element) {\n  var rootNode = element.getRootNode();\n  return rootNode.head || rootNode;\n};\n\nvar createKeyframeStylesheet = function (keyframeName, keyframeRules, element) {\n  var styleContainer = getStyleContainer(element);\n  var existingStylesheet = styleContainer.querySelector('#' + keyframeName);\n\n  if (existingStylesheet) {\n    return existingStylesheet;\n  }\n\n  var stylesheet = (element.ownerDocument || document).createElement('style');\n  stylesheet.id = keyframeName;\n  stylesheet.textContent = \"@keyframes \" + keyframeName + \" { \" + keyframeRules + \" } @keyframes \" + keyframeName + \"-alt { \" + keyframeRules + \" }\";\n  styleContainer.appendChild(stylesheet);\n  return stylesheet;\n};\n\nvar addClassToArray = function (classes, className) {\n  if (classes === void 0) {\n    classes = [];\n  }\n\n  if (className !== undefined) {\n    var classNameToAppend = Array.isArray(className) ? className : [className];\n    return __spreadArrays(classes, classNameToAppend);\n  }\n\n  return classes;\n}; // TODO: Add more tests. until then, be sure to manually test menu and swipe to go back/routing transitions\n\n\nvar createAnimation = function () {\n  var _delay;\n\n  var _duration;\n\n  var _easing;\n\n  var _iterations;\n\n  var _fill;\n\n  var _direction;\n\n  var _keyframes = [];\n  var beforeAddClasses = [];\n  var beforeRemoveClasses = [];\n  var initialized = false;\n  var parentAnimation;\n  var beforeStylesValue = {};\n  var afterAddClasses = [];\n  var afterRemoveClasses = [];\n  var afterStylesValue = {};\n  var numAnimationsRunning = 0;\n  var shouldForceLinearEasing = false;\n  var shouldForceSyncPlayback = false;\n  var cssAnimationsTimerFallback;\n  var forceDirectionValue;\n  var forceDurationValue;\n  var forceDelayValue;\n  var willComplete = true;\n  var finished = false;\n  var shouldCalculateNumAnimations = true;\n  var keyframeName;\n  var ani;\n  var onFinishCallbacks = [];\n  var onFinishOneTimeCallbacks = [];\n  var elements = [];\n  var childAnimations = [];\n  var stylesheets = [];\n  var _beforeAddReadFunctions = [];\n  var _beforeAddWriteFunctions = [];\n  var _afterAddReadFunctions = [];\n  var _afterAddWriteFunctions = [];\n  var webAnimations = [];\n  var supportsAnimationEffect = typeof AnimationEffect === 'function' || typeof window.AnimationEffect === 'function';\n  var supportsWebAnimations = typeof Element === 'function' && typeof Element.prototype.animate === 'function' && supportsAnimationEffect;\n  var ANIMATION_END_FALLBACK_PADDING_MS = 100;\n\n  var getWebAnimations = function () {\n    return webAnimations;\n  };\n\n  var destroy = function () {\n    childAnimations.forEach(function (childAnimation) {\n      childAnimation.destroy();\n    });\n    cleanUp();\n    elements.length = 0;\n    childAnimations.length = 0;\n    _keyframes.length = 0;\n    clearOnFinish();\n    initialized = false;\n    shouldCalculateNumAnimations = true;\n    return ani;\n  };\n  /**\n   * Cancels any Web Animations, removes\n   * any animation properties from the\n   * animation's elements, and removes the\n   * animation's stylesheets from the DOM.\n   */\n\n\n  var cleanUp = function () {\n    cleanUpElements();\n    cleanUpStyleSheets();\n  };\n\n  var onFinish = function (callback, opts) {\n    var callbacks = opts && opts.oneTimeCallback ? onFinishOneTimeCallbacks : onFinishCallbacks;\n    callbacks.push({\n      c: callback,\n      o: opts\n    });\n    return ani;\n  };\n\n  var clearOnFinish = function () {\n    onFinishCallbacks.length = 0;\n    onFinishOneTimeCallbacks.length = 0;\n    return ani;\n  };\n  /**\n   * Cancels any Web Animations and removes\n   * any animation properties from the\n   * the animation's elements.\n   */\n\n\n  var cleanUpElements = function () {\n    if (supportsWebAnimations) {\n      webAnimations.forEach(function (animation) {\n        animation.cancel();\n      });\n      webAnimations.length = 0;\n    } else {\n      elements.forEach(function (element) {\n        raf(function () {\n          removeStyleProperty(element, 'animation-name');\n          removeStyleProperty(element, 'animation-duration');\n          removeStyleProperty(element, 'animation-timing-function');\n          removeStyleProperty(element, 'animation-iteration-count');\n          removeStyleProperty(element, 'animation-delay');\n          removeStyleProperty(element, 'animation-play-state');\n          removeStyleProperty(element, 'animation-fill-mode');\n          removeStyleProperty(element, 'animation-direction');\n        });\n      });\n    }\n  };\n  /**\n   * Removes the animation's stylesheets\n   * from the DOM.\n   */\n\n\n  var cleanUpStyleSheets = function () {\n    stylesheets.forEach(function (stylesheet) {\n      /**\n       * When sharing stylesheets, it's possible\n       * for another animation to have already\n       * cleaned up a particular stylesheet\n       */\n      if (stylesheet && stylesheet.parentNode) {\n        stylesheet.parentNode.removeChild(stylesheet);\n      }\n    });\n    stylesheets.length = 0;\n  };\n\n  var beforeAddRead = function (readFn) {\n    _beforeAddReadFunctions.push(readFn);\n\n    return ani;\n  };\n\n  var beforeAddWrite = function (writeFn) {\n    _beforeAddWriteFunctions.push(writeFn);\n\n    return ani;\n  };\n\n  var afterAddRead = function (readFn) {\n    _afterAddReadFunctions.push(readFn);\n\n    return ani;\n  };\n\n  var afterAddWrite = function (writeFn) {\n    _afterAddWriteFunctions.push(writeFn);\n\n    return ani;\n  };\n\n  var beforeAddClass = function (className) {\n    beforeAddClasses = addClassToArray(beforeAddClasses, className);\n    return ani;\n  };\n\n  var beforeRemoveClass = function (className) {\n    beforeRemoveClasses = addClassToArray(beforeRemoveClasses, className);\n    return ani;\n  };\n  /**\n   * Set CSS inline styles to the animation's\n   * elements before the animation begins.\n   */\n\n\n  var beforeStyles = function (styles) {\n    if (styles === void 0) {\n      styles = {};\n    }\n\n    beforeStylesValue = styles;\n    return ani;\n  };\n  /**\n   * Clear CSS inline styles from the animation's\n   * elements before the animation begins.\n   */\n\n\n  var beforeClearStyles = function (propertyNames) {\n    if (propertyNames === void 0) {\n      propertyNames = [];\n    }\n\n    for (var _i = 0, propertyNames_1 = propertyNames; _i < propertyNames_1.length; _i++) {\n      var property = propertyNames_1[_i];\n      beforeStylesValue[property] = '';\n    }\n\n    return ani;\n  };\n\n  var afterAddClass = function (className) {\n    afterAddClasses = addClassToArray(afterAddClasses, className);\n    return ani;\n  };\n\n  var afterRemoveClass = function (className) {\n    afterRemoveClasses = addClassToArray(afterRemoveClasses, className);\n    return ani;\n  };\n\n  var afterStyles = function (styles) {\n    if (styles === void 0) {\n      styles = {};\n    }\n\n    afterStylesValue = styles;\n    return ani;\n  };\n\n  var afterClearStyles = function (propertyNames) {\n    if (propertyNames === void 0) {\n      propertyNames = [];\n    }\n\n    for (var _i = 0, propertyNames_2 = propertyNames; _i < propertyNames_2.length; _i++) {\n      var property = propertyNames_2[_i];\n      afterStylesValue[property] = '';\n    }\n\n    return ani;\n  };\n\n  var getFill = function () {\n    if (_fill !== undefined) {\n      return _fill;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getFill();\n    }\n\n    return 'both';\n  };\n\n  var getDirection = function () {\n    if (forceDirectionValue !== undefined) {\n      return forceDirectionValue;\n    }\n\n    if (_direction !== undefined) {\n      return _direction;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getDirection();\n    }\n\n    return 'normal';\n  };\n\n  var getEasing = function () {\n    if (shouldForceLinearEasing) {\n      return 'linear';\n    }\n\n    if (_easing !== undefined) {\n      return _easing;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getEasing();\n    }\n\n    return 'linear';\n  };\n\n  var getDuration = function () {\n    if (shouldForceSyncPlayback) {\n      return 0;\n    }\n\n    if (forceDurationValue !== undefined) {\n      return forceDurationValue;\n    }\n\n    if (_duration !== undefined) {\n      return _duration;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getDuration();\n    }\n\n    return 0;\n  };\n\n  var getIterations = function () {\n    if (_iterations !== undefined) {\n      return _iterations;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getIterations();\n    }\n\n    return 1;\n  };\n\n  var getDelay = function () {\n    if (forceDelayValue !== undefined) {\n      return forceDelayValue;\n    }\n\n    if (_delay !== undefined) {\n      return _delay;\n    }\n\n    if (parentAnimation) {\n      return parentAnimation.getDelay();\n    }\n\n    return 0;\n  };\n\n  var getKeyframes = function () {\n    return _keyframes;\n  };\n\n  var direction = function (animationDirection) {\n    _direction = animationDirection;\n    update(true);\n    return ani;\n  };\n\n  var fill = function (animationFill) {\n    _fill = animationFill;\n    update(true);\n    return ani;\n  };\n\n  var delay = function (animationDelay) {\n    _delay = animationDelay;\n    update(true);\n    return ani;\n  };\n\n  var easing = function (animationEasing) {\n    _easing = animationEasing;\n    update(true);\n    return ani;\n  };\n\n  var duration = function (animationDuration) {\n    /**\n     * CSS Animation Durations of 0ms work fine on Chrome\n     * but do not run on Safari, so force it to 1ms to\n     * get it to run on both platforms.\n     */\n    if (!supportsWebAnimations && animationDuration === 0) {\n      animationDuration = 1;\n    }\n\n    _duration = animationDuration;\n    update(true);\n    return ani;\n  };\n\n  var iterations = function (animationIterations) {\n    _iterations = animationIterations;\n    update(true);\n    return ani;\n  };\n\n  var parent = function (animation) {\n    parentAnimation = animation;\n    return ani;\n  };\n\n  var addElement = function (el) {\n    if (el != null) {\n      if (el.nodeType === 1) {\n        elements.push(el);\n      } else if (el.length >= 0) {\n        for (var i = 0; i < el.length; i++) {\n          elements.push(el[i]);\n        }\n      } else {\n        console.error('Invalid addElement value');\n      }\n    }\n\n    return ani;\n  };\n\n  var addAnimation = function (animationToAdd) {\n    if (animationToAdd != null) {\n      if (Array.isArray(animationToAdd)) {\n        for (var _i = 0, animationToAdd_1 = animationToAdd; _i < animationToAdd_1.length; _i++) {\n          var animation = animationToAdd_1[_i];\n          animation.parent(ani);\n          childAnimations.push(animation);\n        }\n      } else {\n        animationToAdd.parent(ani);\n        childAnimations.push(animationToAdd);\n      }\n    }\n\n    return ani;\n  };\n\n  var keyframes = function (keyframeValues) {\n    _keyframes = keyframeValues;\n    return ani;\n  };\n  /**\n   * Runs all before read callbacks\n   */\n\n\n  var runBeforeRead = function () {\n    _beforeAddReadFunctions.forEach(function (callback) {\n      callback();\n    });\n  };\n  /**\n   * Runs all before write callbacks\n   */\n\n\n  var runBeforeWrite = function () {\n    _beforeAddWriteFunctions.forEach(function (callback) {\n      callback();\n    });\n  };\n  /**\n   * Updates styles and classes before animation runs\n   */\n\n\n  var runBeforeStyles = function () {\n    var addClasses = beforeAddClasses;\n    var removeClasses = beforeRemoveClasses;\n    var styles = beforeStylesValue;\n    elements.forEach(function (el) {\n      var elementClassList = el.classList;\n      addClasses.forEach(function (c) {\n        return elementClassList.add(c);\n      });\n      removeClasses.forEach(function (c) {\n        return elementClassList.remove(c);\n      });\n\n      for (var property in styles) {\n        if (styles.hasOwnProperty(property)) {\n          setStyleProperty(el, property, styles[property]);\n        }\n      }\n    });\n  };\n  /**\n   * Run all \"before\" animation hooks.\n   */\n\n\n  var beforeAnimation = function () {\n    runBeforeRead();\n    runBeforeWrite();\n    runBeforeStyles();\n  };\n  /**\n   * Runs all after read callbacks\n   */\n\n\n  var runAfterRead = function () {\n    _afterAddReadFunctions.forEach(function (callback) {\n      callback();\n    });\n  };\n  /**\n   * Runs all after write callbacks\n   */\n\n\n  var runAfterWrite = function () {\n    _afterAddWriteFunctions.forEach(function (callback) {\n      callback();\n    });\n  };\n  /**\n   * Updates styles and classes before animation ends\n   */\n\n\n  var runAfterStyles = function () {\n    var addClasses = afterAddClasses;\n    var removeClasses = afterRemoveClasses;\n    var styles = afterStylesValue;\n    elements.forEach(function (el) {\n      var elementClassList = el.classList;\n      addClasses.forEach(function (c) {\n        return elementClassList.add(c);\n      });\n      removeClasses.forEach(function (c) {\n        return elementClassList.remove(c);\n      });\n\n      for (var property in styles) {\n        if (styles.hasOwnProperty(property)) {\n          setStyleProperty(el, property, styles[property]);\n        }\n      }\n    });\n  };\n  /**\n   * Run all \"after\" animation hooks.\n   */\n\n\n  var afterAnimation = function () {\n    clearCSSAnimationsTimeout();\n    runAfterRead();\n    runAfterWrite();\n    runAfterStyles();\n    var currentStep = willComplete ? 1 : 0;\n    onFinishCallbacks.forEach(function (onFinishCallback) {\n      return onFinishCallback.c(currentStep, ani);\n    });\n    onFinishOneTimeCallbacks.forEach(function (onFinishCallback) {\n      return onFinishCallback.c(currentStep, ani);\n    });\n    onFinishOneTimeCallbacks.length = 0;\n    shouldCalculateNumAnimations = true;\n    finished = true;\n  };\n\n  var animationFinish = function () {\n    if (numAnimationsRunning === 0) {\n      return;\n    }\n\n    numAnimationsRunning--;\n\n    if (numAnimationsRunning === 0) {\n      afterAnimation();\n\n      if (parentAnimation) {\n        parentAnimation.animationFinish();\n      }\n    }\n  };\n\n  var initializeCSSAnimation = function (toggleAnimationName) {\n    if (toggleAnimationName === void 0) {\n      toggleAnimationName = true;\n    }\n\n    cleanUpStyleSheets();\n    elements.forEach(function (element) {\n      if (_keyframes.length > 0) {\n        var keyframeRules = generateKeyframeRules(_keyframes);\n        keyframeName = generateKeyframeName(keyframeRules);\n        var stylesheet_1 = createKeyframeStylesheet(keyframeName, keyframeRules, element);\n        stylesheets.push(stylesheet_1);\n        setStyleProperty(element, 'animation-duration', getDuration() + \"ms\");\n        setStyleProperty(element, 'animation-timing-function', getEasing());\n        setStyleProperty(element, 'animation-delay', getDelay() + \"ms\");\n        setStyleProperty(element, 'animation-fill-mode', getFill());\n        setStyleProperty(element, 'animation-direction', getDirection());\n        var iterationsCount = getIterations() === Infinity ? 'infinite' : getIterations().toString();\n        setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n        setStyleProperty(element, 'animation-play-state', 'paused');\n\n        if (toggleAnimationName) {\n          setStyleProperty(element, 'animation-name', stylesheet_1.id + \"-alt\");\n        }\n\n        raf(function () {\n          setStyleProperty(element, 'animation-name', stylesheet_1.id || null);\n        });\n      }\n    });\n  };\n\n  var initializeWebAnimation = function () {\n    elements.forEach(function (element) {\n      var animation = element.animate(_keyframes, {\n        delay: getDelay(),\n        duration: getDuration(),\n        easing: getEasing(),\n        iterations: getIterations(),\n        fill: getFill(),\n        direction: getDirection()\n      });\n      animation.pause();\n      webAnimations.push(animation);\n    });\n\n    if (webAnimations.length > 0) {\n      webAnimations[0].onfinish = function () {\n        animationFinish();\n      };\n    }\n  };\n\n  var initializeAnimation = function (toggleAnimationName) {\n    if (toggleAnimationName === void 0) {\n      toggleAnimationName = true;\n    }\n\n    beforeAnimation();\n\n    if (_keyframes.length > 0) {\n      if (supportsWebAnimations) {\n        initializeWebAnimation();\n      } else {\n        initializeCSSAnimation(toggleAnimationName);\n      }\n    }\n\n    initialized = true;\n  };\n\n  var setAnimationStep = function (step) {\n    step = Math.min(Math.max(step, 0), 0.999);\n\n    if (supportsWebAnimations) {\n      webAnimations.forEach(function (animation) {\n        animation.currentTime = animation.effect.getComputedTiming().delay + getDuration() * step;\n        animation.pause();\n      });\n    } else {\n      var animationDelay = getDelay() || 0;\n      var animationDuration_1 = \"-\" + (animationDelay + getDuration() * step) + \"ms\";\n      elements.forEach(function (element) {\n        if (_keyframes.length > 0) {\n          setStyleProperty(element, 'animation-delay', animationDuration_1);\n          setStyleProperty(element, 'animation-play-state', 'paused');\n        }\n      });\n    }\n  };\n\n  var updateWebAnimation = function () {\n    webAnimations.forEach(function (animation) {\n      animation.effect.updateTiming({\n        delay: getDelay(),\n        duration: getDuration(),\n        easing: getEasing(),\n        iterations: getIterations(),\n        fill: getFill(),\n        direction: getDirection()\n      });\n    });\n  };\n\n  var updateCSSAnimation = function (toggleAnimationName) {\n    if (toggleAnimationName === void 0) {\n      toggleAnimationName = true;\n    }\n\n    elements.forEach(function (element) {\n      raf(function () {\n        setStyleProperty(element, 'animation-name', keyframeName || null);\n        setStyleProperty(element, 'animation-duration', getDuration() + \"ms\");\n        setStyleProperty(element, 'animation-timing-function', getEasing());\n        setStyleProperty(element, 'animation-delay', getDelay() + \"ms\");\n        setStyleProperty(element, 'animation-fill-mode', getFill() || null);\n        setStyleProperty(element, 'animation-direction', getDirection() || null);\n        var iterationsCount = getIterations() === Infinity ? 'infinite' : getIterations().toString();\n        setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n\n        if (toggleAnimationName) {\n          setStyleProperty(element, 'animation-name', keyframeName + \"-alt\");\n        }\n\n        raf(function () {\n          setStyleProperty(element, 'animation-name', keyframeName || null);\n        });\n      });\n    });\n  };\n\n  var update = function (deep, toggleAnimationName) {\n    if (deep === void 0) {\n      deep = false;\n    }\n\n    if (toggleAnimationName === void 0) {\n      toggleAnimationName = true;\n    }\n\n    if (deep) {\n      childAnimations.forEach(function (animation) {\n        animation.update(deep);\n      });\n    }\n\n    if (supportsWebAnimations) {\n      updateWebAnimation();\n    } else {\n      updateCSSAnimation(toggleAnimationName);\n    }\n\n    return ani;\n  };\n\n  var progressStart = function (forceLinearEasing) {\n    if (forceLinearEasing === void 0) {\n      forceLinearEasing = false;\n    }\n\n    childAnimations.forEach(function (animation) {\n      animation.progressStart(forceLinearEasing);\n    });\n    pauseAnimation();\n    shouldForceLinearEasing = forceLinearEasing;\n\n    if (!initialized) {\n      initializeAnimation();\n    } else {\n      update();\n      setAnimationStep(0);\n    }\n\n    return ani;\n  };\n\n  var progressStep = function (step) {\n    childAnimations.forEach(function (animation) {\n      animation.progressStep(step);\n    });\n    setAnimationStep(step);\n    return ani;\n  };\n\n  var progressEnd = function (playTo, step, dur) {\n    shouldForceLinearEasing = false;\n    childAnimations.forEach(function (animation) {\n      animation.progressEnd(playTo, step, dur);\n    });\n\n    if (dur !== undefined) {\n      forceDurationValue = dur;\n    }\n\n    finished = false;\n    willComplete = playTo === 1;\n\n    if (!willComplete) {\n      forceDirectionValue = getDirection() === 'reverse' ? 'normal' : 'reverse';\n\n      if (supportsWebAnimations) {\n        update();\n        setAnimationStep(1 - step);\n      } else {\n        forceDelayValue = (1 - step) * getDuration() * -1;\n        update(false, false);\n      }\n    } else {\n      if (!supportsWebAnimations) {\n        forceDelayValue = step * getDuration() * -1;\n        update(false, false);\n      }\n    }\n\n    onFinish(function () {\n      willComplete = true;\n      forceDurationValue = undefined;\n      forceDirectionValue = undefined;\n      forceDelayValue = undefined;\n    }, {\n      oneTimeCallback: true\n    });\n\n    if (!parentAnimation) {\n      play();\n    }\n\n    return ani;\n  };\n\n  var pauseAnimation = function () {\n    if (initialized) {\n      if (supportsWebAnimations) {\n        webAnimations.forEach(function (animation) {\n          animation.pause();\n        });\n      } else {\n        elements.forEach(function (element) {\n          setStyleProperty(element, 'animation-play-state', 'paused');\n        });\n      }\n    }\n  };\n\n  var pause = function () {\n    childAnimations.forEach(function (animation) {\n      animation.pause();\n    });\n    pauseAnimation();\n    return ani;\n  };\n\n  var playAsync = function () {\n    return play();\n  };\n\n  var playSync = function () {\n    play({\n      sync: true\n    });\n    return ani;\n  };\n\n  var onAnimationEndFallback = function () {\n    cssAnimationsTimerFallback = undefined;\n    animationFinish();\n  };\n\n  var clearCSSAnimationsTimeout = function () {\n    if (cssAnimationsTimerFallback) {\n      clearTimeout(cssAnimationsTimerFallback);\n    }\n  };\n\n  var playCSSAnimations = function () {\n    clearCSSAnimationsTimeout();\n    elements.forEach(function (element) {\n      if (_keyframes.length > 0) {\n        raf(function () {\n          setStyleProperty(element, 'animation-play-state', 'running');\n        });\n      }\n    });\n\n    if (_keyframes.length === 0 || elements.length === 0) {\n      animationFinish();\n    } else {\n      /**\n       * This is a catchall in the event that a CSS Animation did not finish.\n       * The Web Animations API has mechanisms in place for preventing this.\n       * CSS Animations will not fire an `animationend` event\n       * for elements with `display: none`. The Web Animations API\n       * accounts for this, but using raw CSS Animations requires\n       * this workaround.\n       */\n      var animationDelay = getDelay() || 0;\n      var animationDuration = getDuration() || 0;\n      var animationIterations = getIterations() || 1;\n      cssAnimationsTimerFallback = setTimeout(onAnimationEndFallback, animationDelay + animationDuration * animationIterations + ANIMATION_END_FALLBACK_PADDING_MS);\n      animationEnd(elements[0], function () {\n        clearCSSAnimationsTimeout();\n        /**\n         * Ensure that clean up\n         * is always done a frame\n         * before the onFinish handlers\n         * are fired. Otherwise, there\n         * may be flickering if a new\n         * animation is started on the same\n         * element too quickly\n         *\n         * TODO: Is there a cleaner way to do this?\n         */\n\n        raf(function () {\n          clearCSSAnimationPlayState();\n          raf(animationFinish);\n        });\n      });\n    }\n  };\n\n  var clearCSSAnimationPlayState = function () {\n    elements.forEach(function (element) {\n      removeStyleProperty(element, 'animation-duration');\n      removeStyleProperty(element, 'animation-delay');\n      removeStyleProperty(element, 'animation-play-state');\n    });\n  };\n\n  var playWebAnimations = function () {\n    webAnimations.forEach(function (animation) {\n      animation.play();\n    });\n\n    if (_keyframes.length === 0 || elements.length === 0) {\n      animationFinish();\n    }\n  };\n\n  var resetAnimation = function () {\n    if (supportsWebAnimations) {\n      setAnimationStep(0);\n    } else {\n      updateCSSAnimation();\n    }\n  };\n\n  var play = function (opts) {\n    return new Promise(function (resolve) {\n      if (opts && opts.sync) {\n        shouldForceSyncPlayback = true;\n        onFinish(function () {\n          return shouldForceSyncPlayback = false;\n        }, {\n          oneTimeCallback: true\n        });\n      }\n\n      if (!initialized) {\n        initializeAnimation();\n      }\n\n      if (finished) {\n        resetAnimation();\n        finished = false;\n      }\n\n      if (shouldCalculateNumAnimations) {\n        numAnimationsRunning = childAnimations.length + 1;\n        shouldCalculateNumAnimations = false;\n      }\n\n      onFinish(function () {\n        return resolve();\n      }, {\n        oneTimeCallback: true\n      });\n      childAnimations.forEach(function (animation) {\n        animation.play();\n      });\n\n      if (supportsWebAnimations) {\n        playWebAnimations();\n      } else {\n        playCSSAnimations();\n      }\n    });\n  };\n\n  var stop = function () {\n    childAnimations.forEach(function (animation) {\n      animation.stop();\n    });\n\n    if (initialized) {\n      cleanUpElements();\n      initialized = false;\n    }\n  };\n\n  var from = function (property, value) {\n    var _a;\n\n    var firstFrame = _keyframes[0];\n\n    if (firstFrame !== undefined && firstFrame.offset === 0) {\n      firstFrame[property] = value;\n    } else {\n      _keyframes = __spreadArrays([(_a = {\n        offset: 0\n      }, _a[property] = value, _a)], _keyframes);\n    }\n\n    return ani;\n  };\n\n  var to = function (property, value) {\n    var _a;\n\n    var lastFrame = _keyframes[_keyframes.length - 1];\n\n    if (lastFrame !== undefined && lastFrame.offset === 1) {\n      lastFrame[property] = value;\n    } else {\n      _keyframes = __spreadArrays(_keyframes, [(_a = {\n        offset: 1\n      }, _a[property] = value, _a)]);\n    }\n\n    return ani;\n  };\n\n  var fromTo = function (property, fromValue, toValue) {\n    return from(property, fromValue).to(property, toValue);\n  };\n\n  return ani = {\n    parentAnimation: parentAnimation,\n    elements: elements,\n    childAnimations: childAnimations,\n    animationFinish: animationFinish,\n    from: from,\n    to: to,\n    fromTo: fromTo,\n    parent: parent,\n    play: play,\n    playAsync: playAsync,\n    playSync: playSync,\n    pause: pause,\n    stop: stop,\n    destroy: destroy,\n    keyframes: keyframes,\n    addAnimation: addAnimation,\n    addElement: addElement,\n    update: update,\n    fill: fill,\n    direction: direction,\n    iterations: iterations,\n    duration: duration,\n    easing: easing,\n    delay: delay,\n    getWebAnimations: getWebAnimations,\n    getKeyframes: getKeyframes,\n    getFill: getFill,\n    getDirection: getDirection,\n    getDelay: getDelay,\n    getIterations: getIterations,\n    getEasing: getEasing,\n    getDuration: getDuration,\n    afterAddRead: afterAddRead,\n    afterAddWrite: afterAddWrite,\n    afterClearStyles: afterClearStyles,\n    afterStyles: afterStyles,\n    afterRemoveClass: afterRemoveClass,\n    afterAddClass: afterAddClass,\n    beforeAddRead: beforeAddRead,\n    beforeAddWrite: beforeAddWrite,\n    beforeClearStyles: beforeClearStyles,\n    beforeStyles: beforeStyles,\n    beforeRemoveClass: beforeRemoveClass,\n    beforeAddClass: beforeAddClass,\n    onFinish: onFinish,\n    progressStart: progressStart,\n    progressStep: progressStep,\n    progressEnd: progressEnd\n  };\n};\n\nexport { createAnimation as c };","map":{"version":3,"sources":["D:/COURS/S5/Rojo/Projet/Ionic/template/ionic1/node_modules/@ionic/core/dist/esm-es5/animation-7ed5bc6a.js"],"names":["__spreadArrays","r","raf","setStyleProperty","element","propertyName","value","style","setProperty","removeStyleProperty","removeProperty","animationEnd","el","callback","unRegTrans","opts","passive","unregister","onTransitionEnd","ev","target","addEventListener","removeEventListener","generateKeyframeRules","keyframes","map","keyframe","offset","frameString","property","hasOwnProperty","push","join","keyframeIds","generateKeyframeName","keyframeRules","index","indexOf","getStyleContainer","rootNode","getRootNode","head","createKeyframeStylesheet","keyframeName","styleContainer","existingStylesheet","querySelector","stylesheet","ownerDocument","document","createElement","id","textContent","appendChild","addClassToArray","classes","className","undefined","classNameToAppend","Array","isArray","createAnimation","_delay","_duration","_easing","_iterations","_fill","_direction","_keyframes","beforeAddClasses","beforeRemoveClasses","initialized","parentAnimation","beforeStylesValue","afterAddClasses","afterRemoveClasses","afterStylesValue","numAnimationsRunning","shouldForceLinearEasing","shouldForceSyncPlayback","cssAnimationsTimerFallback","forceDirectionValue","forceDurationValue","forceDelayValue","willComplete","finished","shouldCalculateNumAnimations","ani","onFinishCallbacks","onFinishOneTimeCallbacks","elements","childAnimations","stylesheets","_beforeAddReadFunctions","_beforeAddWriteFunctions","_afterAddReadFunctions","_afterAddWriteFunctions","webAnimations","supportsAnimationEffect","AnimationEffect","window","supportsWebAnimations","Element","prototype","animate","ANIMATION_END_FALLBACK_PADDING_MS","getWebAnimations","destroy","forEach","childAnimation","cleanUp","length","clearOnFinish","cleanUpElements","cleanUpStyleSheets","onFinish","callbacks","oneTimeCallback","c","o","animation","cancel","parentNode","removeChild","beforeAddRead","readFn","beforeAddWrite","writeFn","afterAddRead","afterAddWrite","beforeAddClass","beforeRemoveClass","beforeStyles","styles","beforeClearStyles","propertyNames","_i","propertyNames_1","afterAddClass","afterRemoveClass","afterStyles","afterClearStyles","propertyNames_2","getFill","getDirection","getEasing","getDuration","getIterations","getDelay","getKeyframes","direction","animationDirection","update","fill","animationFill","delay","animationDelay","easing","animationEasing","duration","animationDuration","iterations","animationIterations","parent","addElement","nodeType","i","console","error","addAnimation","animationToAdd","animationToAdd_1","keyframeValues","runBeforeRead","runBeforeWrite","runBeforeStyles","addClasses","removeClasses","elementClassList","classList","add","remove","beforeAnimation","runAfterRead","runAfterWrite","runAfterStyles","afterAnimation","clearCSSAnimationsTimeout","currentStep","onFinishCallback","animationFinish","initializeCSSAnimation","toggleAnimationName","stylesheet_1","iterationsCount","Infinity","toString","initializeWebAnimation","pause","onfinish","initializeAnimation","setAnimationStep","step","Math","min","max","currentTime","effect","getComputedTiming","animationDuration_1","updateWebAnimation","updateTiming","updateCSSAnimation","deep","progressStart","forceLinearEasing","pauseAnimation","progressStep","progressEnd","playTo","dur","play","playAsync","playSync","sync","onAnimationEndFallback","clearTimeout","playCSSAnimations","setTimeout","clearCSSAnimationPlayState","playWebAnimations","resetAnimation","Promise","resolve","stop","from","_a","firstFrame","to","lastFrame","fromTo","fromValue","toValue"],"mappings":"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","sourcesContent":["import { __spreadArrays } from \"tslib\";\nimport { r as raf } from './helpers-46f4a262.js';\nvar setStyleProperty = function (element, propertyName, value) {\n    element.style.setProperty(propertyName, value);\n};\nvar removeStyleProperty = function (element, propertyName) {\n    element.style.removeProperty(propertyName);\n};\nvar animationEnd = function (el, callback) {\n    var unRegTrans;\n    var opts = { passive: true };\n    var unregister = function () {\n        if (unRegTrans) {\n            unRegTrans();\n        }\n    };\n    var onTransitionEnd = function (ev) {\n        if (el === ev.target) {\n            unregister();\n            callback(ev);\n        }\n    };\n    if (el) {\n        el.addEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n        el.addEventListener('animationend', onTransitionEnd, opts);\n        unRegTrans = function () {\n            el.removeEventListener('webkitAnimationEnd', onTransitionEnd, opts);\n            el.removeEventListener('animationend', onTransitionEnd, opts);\n        };\n    }\n    return unregister;\n};\nvar generateKeyframeRules = function (keyframes) {\n    if (keyframes === void 0) { keyframes = []; }\n    return keyframes.map(function (keyframe) {\n        var offset = keyframe.offset;\n        var frameString = [];\n        for (var property in keyframe) {\n            if (keyframe.hasOwnProperty(property) && property !== 'offset') {\n                frameString.push(property + \": \" + keyframe[property] + \";\");\n            }\n        }\n        return offset * 100 + \"% { \" + frameString.join(' ') + \" }\";\n    }).join(' ');\n};\nvar keyframeIds = [];\nvar generateKeyframeName = function (keyframeRules) {\n    var index = keyframeIds.indexOf(keyframeRules);\n    if (index < 0) {\n        index = (keyframeIds.push(keyframeRules) - 1);\n    }\n    return \"ion-animation-\" + index;\n};\nvar getStyleContainer = function (element) {\n    var rootNode = element.getRootNode();\n    return (rootNode.head || rootNode);\n};\nvar createKeyframeStylesheet = function (keyframeName, keyframeRules, element) {\n    var styleContainer = getStyleContainer(element);\n    var existingStylesheet = styleContainer.querySelector('#' + keyframeName);\n    if (existingStylesheet) {\n        return existingStylesheet;\n    }\n    var stylesheet = (element.ownerDocument || document).createElement('style');\n    stylesheet.id = keyframeName;\n    stylesheet.textContent = \"@keyframes \" + keyframeName + \" { \" + keyframeRules + \" } @keyframes \" + keyframeName + \"-alt { \" + keyframeRules + \" }\";\n    styleContainer.appendChild(stylesheet);\n    return stylesheet;\n};\nvar addClassToArray = function (classes, className) {\n    if (classes === void 0) { classes = []; }\n    if (className !== undefined) {\n        var classNameToAppend = (Array.isArray(className)) ? className : [className];\n        return __spreadArrays(classes, classNameToAppend);\n    }\n    return classes;\n};\n// TODO: Add more tests. until then, be sure to manually test menu and swipe to go back/routing transitions\nvar createAnimation = function () {\n    var _delay;\n    var _duration;\n    var _easing;\n    var _iterations;\n    var _fill;\n    var _direction;\n    var _keyframes = [];\n    var beforeAddClasses = [];\n    var beforeRemoveClasses = [];\n    var initialized = false;\n    var parentAnimation;\n    var beforeStylesValue = {};\n    var afterAddClasses = [];\n    var afterRemoveClasses = [];\n    var afterStylesValue = {};\n    var numAnimationsRunning = 0;\n    var shouldForceLinearEasing = false;\n    var shouldForceSyncPlayback = false;\n    var cssAnimationsTimerFallback;\n    var forceDirectionValue;\n    var forceDurationValue;\n    var forceDelayValue;\n    var willComplete = true;\n    var finished = false;\n    var shouldCalculateNumAnimations = true;\n    var keyframeName;\n    var ani;\n    var onFinishCallbacks = [];\n    var onFinishOneTimeCallbacks = [];\n    var elements = [];\n    var childAnimations = [];\n    var stylesheets = [];\n    var _beforeAddReadFunctions = [];\n    var _beforeAddWriteFunctions = [];\n    var _afterAddReadFunctions = [];\n    var _afterAddWriteFunctions = [];\n    var webAnimations = [];\n    var supportsAnimationEffect = (typeof AnimationEffect === 'function' || typeof window.AnimationEffect === 'function');\n    var supportsWebAnimations = (typeof Element === 'function') && (typeof Element.prototype.animate === 'function') && supportsAnimationEffect;\n    var ANIMATION_END_FALLBACK_PADDING_MS = 100;\n    var getWebAnimations = function () {\n        return webAnimations;\n    };\n    var destroy = function () {\n        childAnimations.forEach(function (childAnimation) {\n            childAnimation.destroy();\n        });\n        cleanUp();\n        elements.length = 0;\n        childAnimations.length = 0;\n        _keyframes.length = 0;\n        clearOnFinish();\n        initialized = false;\n        shouldCalculateNumAnimations = true;\n        return ani;\n    };\n    /**\n     * Cancels any Web Animations, removes\n     * any animation properties from the\n     * animation's elements, and removes the\n     * animation's stylesheets from the DOM.\n     */\n    var cleanUp = function () {\n        cleanUpElements();\n        cleanUpStyleSheets();\n    };\n    var onFinish = function (callback, opts) {\n        var callbacks = (opts && opts.oneTimeCallback) ? onFinishOneTimeCallbacks : onFinishCallbacks;\n        callbacks.push({ c: callback, o: opts });\n        return ani;\n    };\n    var clearOnFinish = function () {\n        onFinishCallbacks.length = 0;\n        onFinishOneTimeCallbacks.length = 0;\n        return ani;\n    };\n    /**\n     * Cancels any Web Animations and removes\n     * any animation properties from the\n     * the animation's elements.\n     */\n    var cleanUpElements = function () {\n        if (supportsWebAnimations) {\n            webAnimations.forEach(function (animation) {\n                animation.cancel();\n            });\n            webAnimations.length = 0;\n        }\n        else {\n            elements.forEach(function (element) {\n                raf(function () {\n                    removeStyleProperty(element, 'animation-name');\n                    removeStyleProperty(element, 'animation-duration');\n                    removeStyleProperty(element, 'animation-timing-function');\n                    removeStyleProperty(element, 'animation-iteration-count');\n                    removeStyleProperty(element, 'animation-delay');\n                    removeStyleProperty(element, 'animation-play-state');\n                    removeStyleProperty(element, 'animation-fill-mode');\n                    removeStyleProperty(element, 'animation-direction');\n                });\n            });\n        }\n    };\n    /**\n     * Removes the animation's stylesheets\n     * from the DOM.\n     */\n    var cleanUpStyleSheets = function () {\n        stylesheets.forEach(function (stylesheet) {\n            /**\n             * When sharing stylesheets, it's possible\n             * for another animation to have already\n             * cleaned up a particular stylesheet\n             */\n            if (stylesheet && stylesheet.parentNode) {\n                stylesheet.parentNode.removeChild(stylesheet);\n            }\n        });\n        stylesheets.length = 0;\n    };\n    var beforeAddRead = function (readFn) {\n        _beforeAddReadFunctions.push(readFn);\n        return ani;\n    };\n    var beforeAddWrite = function (writeFn) {\n        _beforeAddWriteFunctions.push(writeFn);\n        return ani;\n    };\n    var afterAddRead = function (readFn) {\n        _afterAddReadFunctions.push(readFn);\n        return ani;\n    };\n    var afterAddWrite = function (writeFn) {\n        _afterAddWriteFunctions.push(writeFn);\n        return ani;\n    };\n    var beforeAddClass = function (className) {\n        beforeAddClasses = addClassToArray(beforeAddClasses, className);\n        return ani;\n    };\n    var beforeRemoveClass = function (className) {\n        beforeRemoveClasses = addClassToArray(beforeRemoveClasses, className);\n        return ani;\n    };\n    /**\n     * Set CSS inline styles to the animation's\n     * elements before the animation begins.\n     */\n    var beforeStyles = function (styles) {\n        if (styles === void 0) { styles = {}; }\n        beforeStylesValue = styles;\n        return ani;\n    };\n    /**\n     * Clear CSS inline styles from the animation's\n     * elements before the animation begins.\n     */\n    var beforeClearStyles = function (propertyNames) {\n        if (propertyNames === void 0) { propertyNames = []; }\n        for (var _i = 0, propertyNames_1 = propertyNames; _i < propertyNames_1.length; _i++) {\n            var property = propertyNames_1[_i];\n            beforeStylesValue[property] = '';\n        }\n        return ani;\n    };\n    var afterAddClass = function (className) {\n        afterAddClasses = addClassToArray(afterAddClasses, className);\n        return ani;\n    };\n    var afterRemoveClass = function (className) {\n        afterRemoveClasses = addClassToArray(afterRemoveClasses, className);\n        return ani;\n    };\n    var afterStyles = function (styles) {\n        if (styles === void 0) { styles = {}; }\n        afterStylesValue = styles;\n        return ani;\n    };\n    var afterClearStyles = function (propertyNames) {\n        if (propertyNames === void 0) { propertyNames = []; }\n        for (var _i = 0, propertyNames_2 = propertyNames; _i < propertyNames_2.length; _i++) {\n            var property = propertyNames_2[_i];\n            afterStylesValue[property] = '';\n        }\n        return ani;\n    };\n    var getFill = function () {\n        if (_fill !== undefined) {\n            return _fill;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getFill();\n        }\n        return 'both';\n    };\n    var getDirection = function () {\n        if (forceDirectionValue !== undefined) {\n            return forceDirectionValue;\n        }\n        if (_direction !== undefined) {\n            return _direction;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getDirection();\n        }\n        return 'normal';\n    };\n    var getEasing = function () {\n        if (shouldForceLinearEasing) {\n            return 'linear';\n        }\n        if (_easing !== undefined) {\n            return _easing;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getEasing();\n        }\n        return 'linear';\n    };\n    var getDuration = function () {\n        if (shouldForceSyncPlayback) {\n            return 0;\n        }\n        if (forceDurationValue !== undefined) {\n            return forceDurationValue;\n        }\n        if (_duration !== undefined) {\n            return _duration;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getDuration();\n        }\n        return 0;\n    };\n    var getIterations = function () {\n        if (_iterations !== undefined) {\n            return _iterations;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getIterations();\n        }\n        return 1;\n    };\n    var getDelay = function () {\n        if (forceDelayValue !== undefined) {\n            return forceDelayValue;\n        }\n        if (_delay !== undefined) {\n            return _delay;\n        }\n        if (parentAnimation) {\n            return parentAnimation.getDelay();\n        }\n        return 0;\n    };\n    var getKeyframes = function () {\n        return _keyframes;\n    };\n    var direction = function (animationDirection) {\n        _direction = animationDirection;\n        update(true);\n        return ani;\n    };\n    var fill = function (animationFill) {\n        _fill = animationFill;\n        update(true);\n        return ani;\n    };\n    var delay = function (animationDelay) {\n        _delay = animationDelay;\n        update(true);\n        return ani;\n    };\n    var easing = function (animationEasing) {\n        _easing = animationEasing;\n        update(true);\n        return ani;\n    };\n    var duration = function (animationDuration) {\n        /**\n         * CSS Animation Durations of 0ms work fine on Chrome\n         * but do not run on Safari, so force it to 1ms to\n         * get it to run on both platforms.\n         */\n        if (!supportsWebAnimations && animationDuration === 0) {\n            animationDuration = 1;\n        }\n        _duration = animationDuration;\n        update(true);\n        return ani;\n    };\n    var iterations = function (animationIterations) {\n        _iterations = animationIterations;\n        update(true);\n        return ani;\n    };\n    var parent = function (animation) {\n        parentAnimation = animation;\n        return ani;\n    };\n    var addElement = function (el) {\n        if (el != null) {\n            if (el.nodeType === 1) {\n                elements.push(el);\n            }\n            else if (el.length >= 0) {\n                for (var i = 0; i < el.length; i++) {\n                    elements.push(el[i]);\n                }\n            }\n            else {\n                console.error('Invalid addElement value');\n            }\n        }\n        return ani;\n    };\n    var addAnimation = function (animationToAdd) {\n        if (animationToAdd != null) {\n            if (Array.isArray(animationToAdd)) {\n                for (var _i = 0, animationToAdd_1 = animationToAdd; _i < animationToAdd_1.length; _i++) {\n                    var animation = animationToAdd_1[_i];\n                    animation.parent(ani);\n                    childAnimations.push(animation);\n                }\n            }\n            else {\n                animationToAdd.parent(ani);\n                childAnimations.push(animationToAdd);\n            }\n        }\n        return ani;\n    };\n    var keyframes = function (keyframeValues) {\n        _keyframes = keyframeValues;\n        return ani;\n    };\n    /**\n     * Runs all before read callbacks\n     */\n    var runBeforeRead = function () {\n        _beforeAddReadFunctions.forEach(function (callback) {\n            callback();\n        });\n    };\n    /**\n     * Runs all before write callbacks\n     */\n    var runBeforeWrite = function () {\n        _beforeAddWriteFunctions.forEach(function (callback) {\n            callback();\n        });\n    };\n    /**\n     * Updates styles and classes before animation runs\n     */\n    var runBeforeStyles = function () {\n        var addClasses = beforeAddClasses;\n        var removeClasses = beforeRemoveClasses;\n        var styles = beforeStylesValue;\n        elements.forEach(function (el) {\n            var elementClassList = el.classList;\n            addClasses.forEach(function (c) { return elementClassList.add(c); });\n            removeClasses.forEach(function (c) { return elementClassList.remove(c); });\n            for (var property in styles) {\n                if (styles.hasOwnProperty(property)) {\n                    setStyleProperty(el, property, styles[property]);\n                }\n            }\n        });\n    };\n    /**\n     * Run all \"before\" animation hooks.\n     */\n    var beforeAnimation = function () {\n        runBeforeRead();\n        runBeforeWrite();\n        runBeforeStyles();\n    };\n    /**\n     * Runs all after read callbacks\n     */\n    var runAfterRead = function () {\n        _afterAddReadFunctions.forEach(function (callback) {\n            callback();\n        });\n    };\n    /**\n     * Runs all after write callbacks\n     */\n    var runAfterWrite = function () {\n        _afterAddWriteFunctions.forEach(function (callback) {\n            callback();\n        });\n    };\n    /**\n     * Updates styles and classes before animation ends\n     */\n    var runAfterStyles = function () {\n        var addClasses = afterAddClasses;\n        var removeClasses = afterRemoveClasses;\n        var styles = afterStylesValue;\n        elements.forEach(function (el) {\n            var elementClassList = el.classList;\n            addClasses.forEach(function (c) { return elementClassList.add(c); });\n            removeClasses.forEach(function (c) { return elementClassList.remove(c); });\n            for (var property in styles) {\n                if (styles.hasOwnProperty(property)) {\n                    setStyleProperty(el, property, styles[property]);\n                }\n            }\n        });\n    };\n    /**\n     * Run all \"after\" animation hooks.\n     */\n    var afterAnimation = function () {\n        clearCSSAnimationsTimeout();\n        runAfterRead();\n        runAfterWrite();\n        runAfterStyles();\n        var currentStep = willComplete ? 1 : 0;\n        onFinishCallbacks.forEach(function (onFinishCallback) {\n            return onFinishCallback.c(currentStep, ani);\n        });\n        onFinishOneTimeCallbacks.forEach(function (onFinishCallback) {\n            return onFinishCallback.c(currentStep, ani);\n        });\n        onFinishOneTimeCallbacks.length = 0;\n        shouldCalculateNumAnimations = true;\n        finished = true;\n    };\n    var animationFinish = function () {\n        if (numAnimationsRunning === 0) {\n            return;\n        }\n        numAnimationsRunning--;\n        if (numAnimationsRunning === 0) {\n            afterAnimation();\n            if (parentAnimation) {\n                parentAnimation.animationFinish();\n            }\n        }\n    };\n    var initializeCSSAnimation = function (toggleAnimationName) {\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\n        cleanUpStyleSheets();\n        elements.forEach(function (element) {\n            if (_keyframes.length > 0) {\n                var keyframeRules = generateKeyframeRules(_keyframes);\n                keyframeName = generateKeyframeName(keyframeRules);\n                var stylesheet_1 = createKeyframeStylesheet(keyframeName, keyframeRules, element);\n                stylesheets.push(stylesheet_1);\n                setStyleProperty(element, 'animation-duration', getDuration() + \"ms\");\n                setStyleProperty(element, 'animation-timing-function', getEasing());\n                setStyleProperty(element, 'animation-delay', getDelay() + \"ms\");\n                setStyleProperty(element, 'animation-fill-mode', getFill());\n                setStyleProperty(element, 'animation-direction', getDirection());\n                var iterationsCount = (getIterations() === Infinity)\n                    ? 'infinite'\n                    : getIterations().toString();\n                setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n                setStyleProperty(element, 'animation-play-state', 'paused');\n                if (toggleAnimationName) {\n                    setStyleProperty(element, 'animation-name', stylesheet_1.id + \"-alt\");\n                }\n                raf(function () {\n                    setStyleProperty(element, 'animation-name', stylesheet_1.id || null);\n                });\n            }\n        });\n    };\n    var initializeWebAnimation = function () {\n        elements.forEach(function (element) {\n            var animation = element.animate(_keyframes, {\n                delay: getDelay(),\n                duration: getDuration(),\n                easing: getEasing(),\n                iterations: getIterations(),\n                fill: getFill(),\n                direction: getDirection()\n            });\n            animation.pause();\n            webAnimations.push(animation);\n        });\n        if (webAnimations.length > 0) {\n            webAnimations[0].onfinish = function () {\n                animationFinish();\n            };\n        }\n    };\n    var initializeAnimation = function (toggleAnimationName) {\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\n        beforeAnimation();\n        if (_keyframes.length > 0) {\n            if (supportsWebAnimations) {\n                initializeWebAnimation();\n            }\n            else {\n                initializeCSSAnimation(toggleAnimationName);\n            }\n        }\n        initialized = true;\n    };\n    var setAnimationStep = function (step) {\n        step = Math.min(Math.max(step, 0), 0.999);\n        if (supportsWebAnimations) {\n            webAnimations.forEach(function (animation) {\n                animation.currentTime = animation.effect.getComputedTiming().delay + (getDuration() * step);\n                animation.pause();\n            });\n        }\n        else {\n            var animationDelay = getDelay() || 0;\n            var animationDuration_1 = \"-\" + (animationDelay + (getDuration() * step)) + \"ms\";\n            elements.forEach(function (element) {\n                if (_keyframes.length > 0) {\n                    setStyleProperty(element, 'animation-delay', animationDuration_1);\n                    setStyleProperty(element, 'animation-play-state', 'paused');\n                }\n            });\n        }\n    };\n    var updateWebAnimation = function () {\n        webAnimations.forEach(function (animation) {\n            animation.effect.updateTiming({\n                delay: getDelay(),\n                duration: getDuration(),\n                easing: getEasing(),\n                iterations: getIterations(),\n                fill: getFill(),\n                direction: getDirection()\n            });\n        });\n    };\n    var updateCSSAnimation = function (toggleAnimationName) {\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\n        elements.forEach(function (element) {\n            raf(function () {\n                setStyleProperty(element, 'animation-name', keyframeName || null);\n                setStyleProperty(element, 'animation-duration', getDuration() + \"ms\");\n                setStyleProperty(element, 'animation-timing-function', getEasing());\n                setStyleProperty(element, 'animation-delay', getDelay() + \"ms\");\n                setStyleProperty(element, 'animation-fill-mode', getFill() || null);\n                setStyleProperty(element, 'animation-direction', getDirection() || null);\n                var iterationsCount = (getIterations() === Infinity)\n                    ? 'infinite'\n                    : getIterations().toString();\n                setStyleProperty(element, 'animation-iteration-count', iterationsCount);\n                if (toggleAnimationName) {\n                    setStyleProperty(element, 'animation-name', keyframeName + \"-alt\");\n                }\n                raf(function () {\n                    setStyleProperty(element, 'animation-name', keyframeName || null);\n                });\n            });\n        });\n    };\n    var update = function (deep, toggleAnimationName) {\n        if (deep === void 0) { deep = false; }\n        if (toggleAnimationName === void 0) { toggleAnimationName = true; }\n        if (deep) {\n            childAnimations.forEach(function (animation) {\n                animation.update(deep);\n            });\n        }\n        if (supportsWebAnimations) {\n            updateWebAnimation();\n        }\n        else {\n            updateCSSAnimation(toggleAnimationName);\n        }\n        return ani;\n    };\n    var progressStart = function (forceLinearEasing) {\n        if (forceLinearEasing === void 0) { forceLinearEasing = false; }\n        childAnimations.forEach(function (animation) {\n            animation.progressStart(forceLinearEasing);\n        });\n        pauseAnimation();\n        shouldForceLinearEasing = forceLinearEasing;\n        if (!initialized) {\n            initializeAnimation();\n        }\n        else {\n            update();\n            setAnimationStep(0);\n        }\n        return ani;\n    };\n    var progressStep = function (step) {\n        childAnimations.forEach(function (animation) {\n            animation.progressStep(step);\n        });\n        setAnimationStep(step);\n        return ani;\n    };\n    var progressEnd = function (playTo, step, dur) {\n        shouldForceLinearEasing = false;\n        childAnimations.forEach(function (animation) {\n            animation.progressEnd(playTo, step, dur);\n        });\n        if (dur !== undefined) {\n            forceDurationValue = dur;\n        }\n        finished = false;\n        willComplete = playTo === 1;\n        if (!willComplete) {\n            forceDirectionValue = (getDirection() === 'reverse') ? 'normal' : 'reverse';\n            if (supportsWebAnimations) {\n                update();\n                setAnimationStep(1 - step);\n            }\n            else {\n                forceDelayValue = ((1 - step) * getDuration()) * -1;\n                update(false, false);\n            }\n        }\n        else {\n            if (!supportsWebAnimations) {\n                forceDelayValue = (step * getDuration()) * -1;\n                update(false, false);\n            }\n        }\n        onFinish(function () {\n            willComplete = true;\n            forceDurationValue = undefined;\n            forceDirectionValue = undefined;\n            forceDelayValue = undefined;\n        }, {\n            oneTimeCallback: true\n        });\n        if (!parentAnimation) {\n            play();\n        }\n        return ani;\n    };\n    var pauseAnimation = function () {\n        if (initialized) {\n            if (supportsWebAnimations) {\n                webAnimations.forEach(function (animation) {\n                    animation.pause();\n                });\n            }\n            else {\n                elements.forEach(function (element) {\n                    setStyleProperty(element, 'animation-play-state', 'paused');\n                });\n            }\n        }\n    };\n    var pause = function () {\n        childAnimations.forEach(function (animation) {\n            animation.pause();\n        });\n        pauseAnimation();\n        return ani;\n    };\n    var playAsync = function () {\n        return play();\n    };\n    var playSync = function () {\n        play({ sync: true });\n        return ani;\n    };\n    var onAnimationEndFallback = function () {\n        cssAnimationsTimerFallback = undefined;\n        animationFinish();\n    };\n    var clearCSSAnimationsTimeout = function () {\n        if (cssAnimationsTimerFallback) {\n            clearTimeout(cssAnimationsTimerFallback);\n        }\n    };\n    var playCSSAnimations = function () {\n        clearCSSAnimationsTimeout();\n        elements.forEach(function (element) {\n            if (_keyframes.length > 0) {\n                raf(function () {\n                    setStyleProperty(element, 'animation-play-state', 'running');\n                });\n            }\n        });\n        if (_keyframes.length === 0 || elements.length === 0) {\n            animationFinish();\n        }\n        else {\n            /**\n             * This is a catchall in the event that a CSS Animation did not finish.\n             * The Web Animations API has mechanisms in place for preventing this.\n             * CSS Animations will not fire an `animationend` event\n             * for elements with `display: none`. The Web Animations API\n             * accounts for this, but using raw CSS Animations requires\n             * this workaround.\n             */\n            var animationDelay = getDelay() || 0;\n            var animationDuration = getDuration() || 0;\n            var animationIterations = getIterations() || 1;\n            cssAnimationsTimerFallback = setTimeout(onAnimationEndFallback, animationDelay + (animationDuration * animationIterations) + ANIMATION_END_FALLBACK_PADDING_MS);\n            animationEnd(elements[0], function () {\n                clearCSSAnimationsTimeout();\n                /**\n                 * Ensure that clean up\n                 * is always done a frame\n                 * before the onFinish handlers\n                 * are fired. Otherwise, there\n                 * may be flickering if a new\n                 * animation is started on the same\n                 * element too quickly\n                 *\n                 * TODO: Is there a cleaner way to do this?\n                 */\n                raf(function () {\n                    clearCSSAnimationPlayState();\n                    raf(animationFinish);\n                });\n            });\n        }\n    };\n    var clearCSSAnimationPlayState = function () {\n        elements.forEach(function (element) {\n            removeStyleProperty(element, 'animation-duration');\n            removeStyleProperty(element, 'animation-delay');\n            removeStyleProperty(element, 'animation-play-state');\n        });\n    };\n    var playWebAnimations = function () {\n        webAnimations.forEach(function (animation) {\n            animation.play();\n        });\n        if (_keyframes.length === 0 || elements.length === 0) {\n            animationFinish();\n        }\n    };\n    var resetAnimation = function () {\n        if (supportsWebAnimations) {\n            setAnimationStep(0);\n        }\n        else {\n            updateCSSAnimation();\n        }\n    };\n    var play = function (opts) {\n        return new Promise(function (resolve) {\n            if (opts && opts.sync) {\n                shouldForceSyncPlayback = true;\n                onFinish(function () { return shouldForceSyncPlayback = false; }, { oneTimeCallback: true });\n            }\n            if (!initialized) {\n                initializeAnimation();\n            }\n            if (finished) {\n                resetAnimation();\n                finished = false;\n            }\n            if (shouldCalculateNumAnimations) {\n                numAnimationsRunning = childAnimations.length + 1;\n                shouldCalculateNumAnimations = false;\n            }\n            onFinish(function () { return resolve(); }, { oneTimeCallback: true });\n            childAnimations.forEach(function (animation) {\n                animation.play();\n            });\n            if (supportsWebAnimations) {\n                playWebAnimations();\n            }\n            else {\n                playCSSAnimations();\n            }\n        });\n    };\n    var stop = function () {\n        childAnimations.forEach(function (animation) {\n            animation.stop();\n        });\n        if (initialized) {\n            cleanUpElements();\n            initialized = false;\n        }\n    };\n    var from = function (property, value) {\n        var _a;\n        var firstFrame = _keyframes[0];\n        if (firstFrame !== undefined && firstFrame.offset === 0) {\n            firstFrame[property] = value;\n        }\n        else {\n            _keyframes = __spreadArrays([\n                (_a = { offset: 0 }, _a[property] = value, _a)\n            ], _keyframes);\n        }\n        return ani;\n    };\n    var to = function (property, value) {\n        var _a;\n        var lastFrame = _keyframes[_keyframes.length - 1];\n        if (lastFrame !== undefined && lastFrame.offset === 1) {\n            lastFrame[property] = value;\n        }\n        else {\n            _keyframes = __spreadArrays(_keyframes, [\n                (_a = { offset: 1 }, _a[property] = value, _a)\n            ]);\n        }\n        return ani;\n    };\n    var fromTo = function (property, fromValue, toValue) {\n        return from(property, fromValue).to(property, toValue);\n    };\n    return ani = {\n        parentAnimation: parentAnimation,\n        elements: elements,\n        childAnimations: childAnimations,\n        animationFinish: animationFinish,\n        from: from,\n        to: to,\n        fromTo: fromTo,\n        parent: parent,\n        play: play,\n        playAsync: playAsync,\n        playSync: playSync,\n        pause: pause,\n        stop: stop,\n        destroy: destroy,\n        keyframes: keyframes,\n        addAnimation: addAnimation,\n        addElement: addElement,\n        update: update,\n        fill: fill,\n        direction: direction,\n        iterations: iterations,\n        duration: duration,\n        easing: easing,\n        delay: delay,\n        getWebAnimations: getWebAnimations,\n        getKeyframes: getKeyframes,\n        getFill: getFill,\n        getDirection: getDirection,\n        getDelay: getDelay,\n        getIterations: getIterations,\n        getEasing: getEasing,\n        getDuration: getDuration,\n        afterAddRead: afterAddRead,\n        afterAddWrite: afterAddWrite,\n        afterClearStyles: afterClearStyles,\n        afterStyles: afterStyles,\n        afterRemoveClass: afterRemoveClass,\n        afterAddClass: afterAddClass,\n        beforeAddRead: beforeAddRead,\n        beforeAddWrite: beforeAddWrite,\n        beforeClearStyles: beforeClearStyles,\n        beforeStyles: beforeStyles,\n        beforeRemoveClass: beforeRemoveClass,\n        beforeAddClass: beforeAddClass,\n        onFinish: onFinish,\n        progressStart: progressStart,\n        progressStep: progressStep,\n        progressEnd: progressEnd\n    };\n};\nexport { createAnimation as c };\n"]},"metadata":{},"sourceType":"module"}