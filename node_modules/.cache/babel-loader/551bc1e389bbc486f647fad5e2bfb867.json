{"ast":null,"code":"const API_URL = 'http://localhost:3002/api';\nexport class RemoteService {\n  request(requestType, urlOptions, body) {\n    // Get JsonWebToken\n    let token = sessionStorage.getItem('userToken'); // Update request header\n\n    var _headers = new Headers();\n\n    _headers.append('Content-Type', 'application/json');\n\n    _headers.append('Accept', 'application/json');\n\n    _headers.append('token', `${token}`); // _headers.append('Authorization', `Bearer ${token}`);\n\n\n    return fetch(`${API_URL}/${urlOptions.endPoint}`, {\n      method: requestType || 'GET',\n      body: body ? JSON.stringify(body) : null,\n      // credentials: 'include',\n      // credentials: 'same-origin',\n      mode: 'cors',\n      redirect: 'follow',\n      headers: _headers\n    }).then(response => {\n      // If error then exit\n      if (response.status !== 200) {\n        console.log('Looks like there was a problem. Status Code: ' + response.status);\n        sessionStorage.removeItem('userToken');\n        return;\n      } // Examine the text in the response\n\n\n      console.log('Response : ', response);\n      return response.json();\n    }).catch(error => {\n      // This is where you run code if the server returns any errors\n      console.log('Looks like there was a problem in service. ' + error);\n    });\n    ;\n  }\n\n}","map":{"version":3,"sources":["D:/COURS/S5/Rojo/Projet/Ionic/template/ionic1/src/services/remote.service.ts"],"names":["API_URL","RemoteService","request","requestType","urlOptions","body","token","sessionStorage","getItem","_headers","Headers","append","fetch","endPoint","method","JSON","stringify","mode","redirect","headers","then","response","status","console","log","removeItem","json","catch","error"],"mappings":"AAEA,MAAMA,OAAO,GAAG,2BAAhB;AAEA,OAAO,MAAMC,aAAN,CAAoB;AAEhBC,EAAAA,OAAO,CAACC,WAAD,EAAsBC,UAAtB,EAA+CC,IAA/C,EAA2D;AACrE;AACA,QAAIC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,WAAvB,CAAZ,CAFqE,CAIrE;;AACA,QAAIC,QAAQ,GAAG,IAAIC,OAAJ,EAAf;;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,cAAhB,EAAgC,kBAAhC;;AACAF,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,kBAA1B;;AACAF,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAA0B,GAAEL,KAAM,EAAlC,EARqE,CASrE;;;AAEA,WAAOM,KAAK,CAAE,GAAEZ,OAAQ,IAAGI,UAAU,CAACS,QAAS,EAAnC,EAAsC;AAC9CC,MAAAA,MAAM,EAAEX,WAAW,IAAI,KADuB;AAE9CE,MAAAA,IAAI,EAAEA,IAAI,GAAGU,IAAI,CAACC,SAAL,CAAeX,IAAf,CAAH,GAA0B,IAFU;AAG9C;AACA;AACAY,MAAAA,IAAI,EAAE,MALwC;AAM9CC,MAAAA,QAAQ,EAAE,QANoC;AAO9CC,MAAAA,OAAO,EAAEV;AAPqC,KAAtC,CAAL,CASFW,IATE,CASIC,QAAD,IAAc;AAChB;AACA,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzBC,QAAAA,OAAO,CAACC,GAAR,CAAY,kDAAkDH,QAAQ,CAACC,MAAvE;AACAf,QAAAA,cAAc,CAACkB,UAAf,CAA0B,WAA1B;AACA;AACH,OANe,CAQhB;;;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,QAA3B;AACA,aAAOA,QAAQ,CAACK,IAAT,EAAP;AACH,KApBE,EAoBAC,KApBA,CAoBOC,KAAD,IAAW;AAChB;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,gDAAgDI,KAA5D;AACH,KAvBE,CAAP;AAuBO;AACV;;AArCsB","sourcesContent":["import { IUrlOptions } from '../models/rest-api.model';\r\n\r\nconst API_URL = 'http://localhost:3002/api';\r\n\r\nexport class RemoteService {\r\n\r\n    public request(requestType: string, urlOptions: IUrlOptions, body?: any) {\r\n        // Get JsonWebToken\r\n        let token = sessionStorage.getItem('userToken');\r\n\r\n        // Update request header\r\n        var _headers = new Headers();\r\n        _headers.append('Content-Type', 'application/json');\r\n        _headers.append('Accept', 'application/json');\r\n        _headers.append('token', `${token}`);\r\n        // _headers.append('Authorization', `Bearer ${token}`);\r\n\r\n        return fetch(`${API_URL}/${urlOptions.endPoint}`, {\r\n            method: requestType || 'GET',\r\n            body: body ? JSON.stringify(body) : null,\r\n            // credentials: 'include',\r\n            // credentials: 'same-origin',\r\n            mode: 'cors',\r\n            redirect: 'follow',\r\n            headers: _headers\r\n        })\r\n            .then((response) => {\r\n                // If error then exit\r\n                if (response.status !== 200) {\r\n                    console.log('Looks like there was a problem. Status Code: ' + response.status);\r\n                    sessionStorage.removeItem('userToken')\r\n                    return;\r\n                }\r\n\r\n                // Examine the text in the response\r\n                console.log('Response : ', response);\r\n                return response.json();\r\n            }).catch((error) => {\r\n                // This is where you run code if the server returns any errors\r\n                console.log('Looks like there was a problem in service. ' + error);\r\n            });;\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}